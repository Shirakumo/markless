\definesubsection{Code block}
\begin{identifier}{code block}
<prefix ::+> *<language ![,]+>?<options .*>
<content .*>
<prefix>
\end{identifier}
\definetextualcomponent{code block}{font-family: monospace; white-space: preserve} \\

The code block is a \g{guarded line directive}. It marks the \g{text} to belong to a \g{textual component} that somehow distinguishes the block as source code. Only the \g{text} held by the \g{content binding} is outputted to the \g{resulting textual component}. The code block \g{directive} cannot contain any other \gpl{directive}. \\

The \gpl{newline} and \g{whitespace} must be represented exactly as in the source text. Multiple consecutive \g{whitespace} \gpl{character} cannot be combined and must be individually represented. A \g{newline} \g{character} cannot be escaped and must always result in a new line being started. \G{escaping} is deactivated within the content, meaning backslashes are output literally in the \g{resulting textual component}.  \\

The \inline$options$ \g{binding} holds potential parameters that can configure the \g{style} of the \g{resulting textual component}. The syntax and effect of the options is \g{implementation dependant}. If a language is requested in the \linline$language$ \g{binding} that the \g{implementation} does not have specific support for, a \g{warning} is \glink{signalling}{signalled}. The language \inline$text$ must always be supported and will incur no styling changes. \\

\begin{examples}
\begin{examplesource}
Some unexciting code:
:: common-lisp
(print "Hello world")
::
\end{examplesource}
  &$\Rightarrow$&
  \begin{tabular}{@{}l@{}}
Some unexciting code: \\
\begin{lstlisting}[style=codestyle,language=Lisp,showstringspaces=false]
(print "Hello world")
\end{lstlisting}
\end{tabular}
\end{examples}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "markless"
%%% TeX-engine: luatex
%%% TeX-command-extra-options: "-shell-escape"
%%% End: